在Ubuntu系统上进行压力测试可以帮助我们了解系统在高负荷下的表现。本文将介绍如何使用**stress**和**stress-ng**工具在Ubuntu上进行CPU、内存和硬盘的压力测试。

安装压力测试工具

首先，我们需要安装**stress**和**stress-ng**工具。可以通过以下命令进行安装：

sudo apt-get install stress

sudo apt-get install stress-ng

!

安装完成后，可以通过以下命令查看工具版本：

stress --version

stress-ng --version

使用stress进行CPU压力测试

**stress**工具可以用于对CPU进行满载和半载测试。以下是一些常用的命令示例：

CPU满载测试

stress --cpu 4

此命令将使系统的4个CPU核心处于满载状态。

CPU半载测试

可以通过编写脚本来实现CPU核心的交替满载。以下是一个示例脚本：

\#!/bin/bash

while [ 1 ]

do

echo 1 > /sys/devices/system/cpu/cpu0/online

echo 1 > /sys/devices/system/cpu/cpu1/online

echo 0 > /sys/devices/system/cpu/cpu2/online

echo 0 > /sys/devices/system/cpu/cpu3/online

sleep 2

echo 1 > /sys/devices/system/cpu/cpu2/online

echo 1 > /sys/devices/system/cpu/cpu3/online

echo 0 > /sys/devices/system/cpu/cpu0/online

echo 0 > /sys/devices/system/cpu/cpu1/online

sleep 2

done

保存脚本并赋予执行权限：

chmod +x test

运行脚本：

/test

然后使用以下命令进行压力测试：

stress --cpu 2

此时，CPU将处于两两满载交替运行的状态。

使用stress-ng进行综合压力测试

**stress-ng**工具提供了更多的选项，可以对CPU、内存和硬盘进行综合压力测试。以下是一些常用的命令示例：

CPU压力测试

stress-ng --cpu 16 --timeout 180

此命令将对16个CPU核心进行180秒的压力测试。

内存压力测试

stress-ng --vm 4 --vm-bytes 10G --vm-hang 180 --timeout 180s

此命令将对内存进行10GB的压力测试，持续180秒

硬盘压力测试

stress-ng --hdd 5 --hdd-bytes 10G --timeout 180s

此命令将对硬盘进行10GB的压力测试，持续180秒